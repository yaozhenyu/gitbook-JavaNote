# Activiti工作流

## Activiti数据库表结构

Activiti工作流总共包含23张数据表，所有的表名默认以“**ACT\_**”开头。

并且表名的第二部分用两个字母表明表的用例，而这个用例也基本上跟Service API匹配。

* **ACT\_GE\_\*** : “GE”代表“General”（通用），用在各种情况下；

* **ACT\_HI\_\*** : “HI”代表“History”（历史），这些表中保存的都是历史数据，比如执行过的流程实例、变量、任务，等等。Activit默认提供了4种历史级别：

  **none**: 不保存任何历史记录，可以提高系统性能；

  **activity**：保存所有的流程实例、任务、活动信息；

  **audit**：也是Activiti的**默认**级别，保存所有的流程实例、任务、活动、表单属性；

  **full**：最完整的历史记录，除了包含**audit**级别的信息之外还能保存详细，例如：流程变量。

对于几种级别根据对功能的要求选择，如果需要日后跟踪详细可以开启**full**。

* **ACT\_ID\_\*** : “ID”代表“Identity”（身份），这些表中保存的都是身份信息，如用户和组以及两者之间的关系。如果Activiti被集成在某一系统当中的话，这些表可以不用，可以直接使用现有系统中的用户或组信息；
* **ACT\_RE\_\*** : “RE”代表“Repository”（仓库），这些表中保存一些‘静态’信息，如流程定义和流程资源（如图片、规则等）；
* **ACT\_RU\_\*** : “RU”代表“Runtime”（运行时），这些表中保存一些流程实例、用户任务、变量等的运行时数据。Activiti只保存流程实例在执行过程中的运行时数据，并且当流程结束后会立即移除这些数据，这是为了保证运行时表尽量的小并运行的足够快；

#### 表名:ACT\_HI\_ACTINST（历史节点表）

历史活动信息。这里记录流程流转过的所有节点，与HI\_TASKINST不同的是，taskinst只记录usertask内容。

PROC\_DEF\_ID\_:流程定义ID

PROC\_INST\_ID\_:流程实例ID

EXECUTION\_ID\_:流程执行ID

TASK\_ID\_: 任务ID

ACT\_NAME\_:活动名称

ASSIGNEE\_:代理人员

START\_TIME\_: 开始时间

END\_TIME\_:结束时间

